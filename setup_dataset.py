#!/usr/bin/env python3
"""
Setup script for Kaggle dataset configuration.
This script helps you set up your Kaggle credentials for downloading the air quality dataset.
"""

import os
from pathlib import Path

def setup_kaggle_credentials():
    """Interactive setup for Kaggle credentials."""
    
    print("🔧 Kaggle Dataset Setup")
    print("=" * 40)
    print()
    
    # Check if kaggle.json already exists
    kaggle_dir = Path.home() / ".kaggle"
    kaggle_config = kaggle_dir / "kaggle.json"
    
    if kaggle_config.exists():
        print("✅ Kaggle credentials already configured!")
        print(f"📁 Found at: {kaggle_config}")
    else:
        print("📝 Steps to set up Kaggle credentials:")
        print("1. Go to: https://www.kaggle.com/settings")
        print("2. Scroll to 'API' section")
        print("3. Click 'Create New API Token'")
        print("4. Download kaggle.json file")
        print("5. Place it in ~/.kaggle/kaggle.json")
        print()
        
        response = input("Have you already downloaded kaggle.json? (y/n): ").lower()
        if response == 'y':
            print("Please ensure kaggle.json is in ~/.kaggle/ directory")
            return
    
    # Create .env file for project configuration
    env_file = Path(".env")
    env_content = f"""# Kaggle Dataset Configuration
# Generated by setup_dataset.py

# Dataset Information
KAGGLE_DATASET=rohanrao/air-quality-data-in-india
DATA_SOURCE=kaggle

# Dashboard Configuration  
DASHBOARD_PORT=8501
DASHBOARD_DEBUG=False

# Logging Level
LOG_LEVEL=INFO
"""
    
    with open(".env", "w") as f:
        f.write(env_content)
    
    print()
    print("✅ Project configuration created!")
    print("📁 Created .env file with dataset settings")
    print()
    print("🚀 Next steps:")
    print("1. Download dataset: kaggle datasets download -d rohanrao/air-quality-data-in-india")
    print("2. Run preprocessing: python src/preprocessing.py")
    print("3. Or run full pipeline: ./run_pipeline.sh")
    print()
    print("💡 Make sure to unzip the dataset in data/kaggle_raw/ directory")

if __name__ == "__main__":
    setup_kaggle_credentials()